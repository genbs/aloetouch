exports.AloeTouch=function(t){function e(i){if(n[i])return n[i].exports;var s=n[i]={i:i,l:!1,exports:{}};return t[i].call(s.exports,s,s.exports,e),s.l=!0,s.exports}var n={};return e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=3)}([function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(2),a=i(r),c=n(1),u=i(c),l=85,h=600,d=20,f=function(){function t(e,n,i,o){s(this,t),this.id=e,this.el="string"==typeof n?document.querySelector(n):n,this.events=i||{},this.strictMode=o||!1,this.events.state=this.events.state||{},this.locked=!0,this.utils=a.default,this.state=u.default,this.start=this.start.bind(this),this.move=this.move.bind(this),this.finish=this.finish.bind(this),this.clear(),this.clearState(),this.unlock()}return o(t,[{key:"start",value:function(t){this.locked||(console.log("start"),this.started=this.utils.create(t,this.el,this.strictMode,this.started),this.started.updated?this.mooving=!0:this.pressEmitted=window.setTimeout(this.press.bind(this),h),this.emit("start"))}},{key:"move",value:function(t){var e=this;this.prepareMove(t,function(n){e.isPermissible()?(t.preventDefault(),t.stopPropagation(),e.mooving=!0,e.dispatch()):e.mooving=!1})}},{key:"prepareMove",value:function(t,e){!this.locked&&this.started&&e(this.ended=this.utils.create(t,this.el,this.strictMode))}},{key:"isPermissible",value:function(){var t=this.ended.time-this.started.time,e=this.utils.isHorizontal(this.started,this.ended);return this.mooving||null===this.mooving&&(e||t>l)}},{key:"dispatch",value:function(){var t=this.utils.howManyTouches(this.ended),e=null,n=null,i=null;1==t?e=this.utils.coords(this.started,this.ended):2==t&&(e=this.utils.coords(this.started,this.ended),n=this.utils.distanceBetween(this.started,this.ended),i=this.utils.rotation(this.started,this.ended)),this.setStateAndEmit({pan:e,pinch:n,rotate:i},t),this.emit("move")}},{key:"setStateAndEmit",value:function(t,e){this.stateValue=this.state.set(this.stateValue,t,this.events.state),1==e&&t.pan&&this.pan(),2==e&&t.pan&&this.pan2(),t.pinch&&this.pinch(t.pinch),t.rotate&&this.rotate(t.rotate)}},{key:"finish",value:function(t){console.log("finish"),!this.locked&&this.started&&(this.mooving&&this.swipe(),null===this.mooving&&this.tap(),this.stateValue=this.state.refresh(this.stateValue,this.events.state),this.emit("end")),this.clear()}},{key:"clear",value:function(){console.log("CLEAR"),this.pressEmitted&&window.clearTimeout(this.pressEmitted),this.started=null,this.ended=null,this.mooving=null,this.pressEmitted=null}},{key:"isLock",value:function(){return this.locked}},{key:"lock",value:function(){this.locked||(this.off("touchstart",this.start),this.off("touchmove",this.move),this.off("touchend touchcancel",this.finish),this.locked=!0)}},{key:"unlock",value:function(){this.locked&&(this.on("touchstart",this.start),this.on("touchmove",this.move),this.on("touchend touchcancel",this.finish),this.locked=!1)}},{key:"setState",value:function(t){var e=this;Object.keys(t).forEach(function(n){return e.events.state[n]=t[n]})}},{key:"getState",value:function(){return this.stateValue}},{key:"removeState",value:function(t){this.state[t]=null,this.stateValue[t]=null,delete this.state[t],delete this.stateValue[t]}},{key:"clearState",value:function(){this.stateValue=this.state.create()}},{key:"tap",value:function(){var t=this.utils.howManyTouches(this.ended),e=Date.now()-this.started.time;t<2&&e<h&&this.emit("tap")}},{key:"press",value:function(){this.pressEmitted&&!this.mooving&&(this.emit("press"),this.pressEmitted=null)}},{key:"swipe",value:function(){var t=this.ended?this.utils.coords(this.started,this.ended):{};if(Math.abs(t.x)>d){var e=this.utils.stringDirection(t);this.emit("swipe"+e.x),this.emit("swipe"+e.y),this.emit("swipe")}}},{key:"pan",value:function(){this.emit("pan")}},{key:"pan2",value:function(){this.emit("pan2")}},{key:"pinch",value:function(t){this.emit("pinch",{distance:t})}},{key:"rotate",value:function(t){this.emit("rotate",{rotation:t})}},{key:"emit",value:function(t,e){if(this.events[t]){return this.events[t](this.setEventData(e))===!1&&this.clear()}}},{key:"setEventData",value:function(t){var e=void 0,n=void 0,i=void 0;return this.ended?(e=this.utils.coords(this.started,this.ended),n=this.utils.stringDirection(e)):(this.ended=this.utils.create(null),e={x:this.started.touches[0].clientX,y:this.started.touches[0].clientY}),i=(this.ended.time-this.started.time)/1e3,Object.assign({},{el:this.el,coords:e,directions:n,velocity:{x:e.x/i,y:e.y/i,d:this.utils.scalar(e.x,e.y)/i},fingers:this.utils.howManyTouches(this.ended),$state:this.stateValue,duration:i},t)}},{key:"attach",value:function(t){var e=this;Object.keys(t).forEach(function(n){return e.events[n]=t[n]})}},{key:"detach",value:function(t){var e=this;t="Array"===t.constructor.name?t:[t],t.forEach(function(t){return e.events[t]&&delete e.events[t]})}},{key:"on",value:function(t,e){var n=this;t.split(" ").forEach(function(t){return n.el.addEventListener(t,e,!0)})}},{key:"off",value:function(t,e,n){var i=this;t.split(" ").forEach(function(t){return i.el.removeEventListener(t,e,!0)})}}]),t}();e.default=f},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s={init:function(){return{pan:{x:null,y:null},pinch:null,rotate:null}},create:function(){return Object.assign({},s.init(),{$old:s.init()})},set:function(t,e,n){return e.rotate&&(t.rotate=e.rotate+t.$old.rotate),e.pinch&&(t.pinch=e.pinch+t.$old.pinch),e.pan&&e.pan.x&&(t.pan.x=e.pan.x+t.$old.pan.x),e.pan&&e.pan.y&&(t.pan.y=e.pan.y+t.$old.pan.y),Object.keys(n).forEach(function(e){return t[e]=n[e](t)}),t},refresh:function(t){return t.$old=s.copyState(t),t},copyState:function(t){var e={};return Object.keys(t).forEach(function(n){"$old"!=n&&(e[n]="object"===i(t[n])&&null!==t[n]?s.copyState(t[n]):t[n])}),e}};e.default={set:s.set,create:s.create,refresh:s.refresh}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={create:function(t,e,n,s){var o=s?Object.assign({},s,{updated:!0}):{time:Date.now()};return o.touches=t&&t.touches?i.getTouches(t.touches,e):[{clientX:0,clientY:0}],console.log("create",o,t,s),o},getTouches:function(t,e,n){var s=[];return Object.keys(t).forEach(function(o){i.validate(t[o],e,n)&&s.push({clientX:t[o].clientX,clientY:t[o].clientY})}),s},validate:function(t,e,n){return t&&(t.clientX||t.clientY)&&(n?e==t.target:e.contains(t.target))},coords:function(t,e){return i.diff(t.touches[0],e.touches[0])},diff:function(t,e){return{x:e.clientX-t.clientX,y:e.clientY-t.clientY}},howManyTouches:function(t){return t&&t.touches?t.touches.length:0},isVertical:function(t,e){var n=i.coords(t,e);return Math.abs(n.y)>Math.abs(n.x)},isHorizontal:function(t,e){var n=i.coords(t,e);return Math.abs(n.x)>Math.abs(n.y)},stringDirection:function(t){return{x:t.x<=0?"Left":"Right",y:t.y<=0?"Top":"Bottom"}},distanceBetween:function(t,e){return console.log("distanceBetween",t,e),i.distance(e)-i.distance(t)},distance:function t(e){var t=i.diff(e.touches[0],e.touches[1]);return i.scalar(t.x,t.y)},scalar:function(t,e){return Math.sqrt(Math.pow(t,2)+Math.pow(e,2))},direction:function(t){var e=i.diff(t.touches[0],t.touches[1]);return i.angle(e.x,e.y)},angle:function(t,e){return 180*Math.atan2(e,t)/Math.PI},rotation:function(t,e){return i.direction(e)-i.direction(t)}};e.default={create:i.create,coords:i.coords,howManyTouches:i.howManyTouches,isVertical:i.isVertical,isHorizontal:i.isHorizontal,stringDirection:i.stringDirection,distanceBetween:i.distanceBetween,direction:i.direction,rotation:i.rotation,angle:i.angle,scalar:i.scalar}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var s=n(0),o=i(s),r={length:0,list:{},bind:function(t,e,n){var i=++r.length;return r.list[i]={$id:i,attach:r.caller("attach"),detach:r.caller("detach"),setState:r.caller("setState"),getState:r.caller("getState"),removeState:r.caller("removeState"),clearState:r.caller("clearState"),isLock:r.caller("isLock"),lock:r.caller("lock"),unlock:r.caller("unlock"),$ref:new o.default(i,t,e,n)}},caller:function(t){return function(e){this.$ref&&this.$ref[t](e)}},unbind:function(t){var e=this.getIds(t,!0);return!!e&&(r.list[e].lock(),delete r.list[e].$ref,delete r.list[e],!0)},get:function(t){return r.list.hasOwnProperty(t)?r.list[t]:null},getIds:function(t,e){return t="Array"===t.constructor.name?t:[t],t=t.map(function(t){return"number"==typeof t?r.get(t)?t:null:t.$ref?t.$id:null}),t=t.filter(function(t){return!!t}),e&&1==t.length?t[0]:t},lock:function(t){t?r.list[t].lock():r.map(function(t){return t.lock()})},lockExcept:function(t){ids=this.getIds(ids)||[],r.map(function(t,e){return t[ids.indexOf(e)==-1?"unlock":"lock"]()})},lockOnly:function(t){ids=this.getIds(ids)||[],r.map(function(t,e){return t[ids.indexOf(e)>=0?"lock":"unlock"]()})},unlock:function(t){t?r.list[t].unlock():r.map(function(t){return t.unlock()})},unlockExcept:function(t){r.lockOnly(t)},unlockOnly:function(t){r.lockExcept(t)},map:function(t){Object.keys(r.list).forEach(function(e){return t(r.list[e],e)})}};e.default=r}]);
//# sourceMappingURL=aloetouch.min.js.map