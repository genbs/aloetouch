!function(t){function e(n){if(i[n])return i[n].exports;var s=i[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,e),s.l=!0,s.exports}var i={};return e.m=t,e.c=i,e.i=function(t){return t},e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=3)}([function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=i(2),c=n(r),u=i(1),a=n(u),l=85,h=600,d=20,f=function(){function t(e,i,n,o){s(this,t),this.id=e,this.el="string"==typeof i?document.querySelector(i):i,this.events=n||{},this.strictMode=o||!1,this.events.state=this.events.state||{},this.locked=!0,this.utils=c.default,this.state=a.default,this.start=this.start.bind(this),this.move=this.move.bind(this),this.finish=this.finish.bind(this),this.clear(),this.clearState(),this.unlock()}return o(t,[{key:"start",value:function(t){this.locked||(this.$event=t,this.started=this.utils.create(t,this.strictMode?this.el:null,this.started),this.started.updated?this.mooving=!0:this.pressEmitted=window.setTimeout(this.press.bind(this),h),this.emit("start"))}},{key:"move",value:function(t){var e=this;!this.locked&&this.prepareMove(t,function(i){e.isPermissible()?(t.preventDefault(),e.$event=t,e.mooving=!0,e.dispatch()):e.mooving=!1})}},{key:"prepareMove",value:function(t,e){this.started?e(this.ended=this.utils.create(t,this.strictMode?this.el:null)):this.clear()}},{key:"isPermissible",value:function(){var t=this.ended.time-this.started.time,e=this.utils.isHorizontal(this.started,this.ended);return this.mooving||null===this.mooving&&(e||t>l)}},{key:"dispatch",value:function(){var t=this.utils.howManyTouches(this.ended),e=null,i=null,n=null;1==t?e=this.utils.coords(this.started,this.ended):2==t&&(e=this.utils.coords(this.started,this.ended),i=this.utils.distanceBetween(this.started,this.ended),n=this.utils.rotation(this.started,this.ended)),this.setStateAndEmit({pan:e,pinch:i,rotate:n},t),this.emit("move")}},{key:"setStateAndEmit",value:function(t,e){this.stateValue=this.state.set(this.stateValue,t,this.events.state),1==e&&t.pan&&this.pan(),2==e&&t.pan&&this.pan2(),t.pinch&&this.pinch(t.pinch),t.rotate&&this.rotate(t.rotate)}},{key:"finish",value:function(t){!this.locked&&this.started&&(this.$event=t,this.mooving&&this.swipe(),null===this.mooving&&this.tap(),this.stateValue=this.state.refresh(this.stateValue,this.events.state),this.emit("end")),this.clear()}},{key:"clear",value:function(){this.pressEmitted&&window.clearTimeout(this.pressEmitted),this.started=null,this.ended=null,this.mooving=null,this.$event=null,this.pressEmitted=null}},{key:"isLock",value:function(){return this.locked}},{key:"lock",value:function(){this.locked||(this.off("touchstart",this.start,!0),this.off("touchmove",this.move),this.off("touchend touchcancel",this.finish,!0),this.locked=!0)}},{key:"unlock",value:function(){this.locked&&(this.on("touchstart",this.start,!0),this.on("touchmove",this.move),this.on("touchend touchcancel",this.finish,!0),this.locked=!1)}},{key:"setState",value:function(t){var e=this;Object.keys(t).forEach(function(i){return e.events.state[i]=t[i]})}},{key:"getState",value:function(){return this.stateValue}},{key:"removeState",value:function(t){this.state[t]=null,this.stateValue[t]=null,delete this.state[t],delete this.stateValue[t]}},{key:"clearState",value:function(){this.stateValue=this.state.create()}},{key:"tap",value:function(){var t=this.utils.howManyTouches(this.ended),e=Date.now()-this.started.time;t<2&&e<h&&this.emit("tap")}},{key:"press",value:function(){this.pressEmitted&&!this.mooving&&(this.emit("press"),this.pressEmitted=null)}},{key:"swipe",value:function(){var t=this.ended?this.utils.coords(this.started,this.ended):{};if(Math.abs(t.x)>d){var e=this.utils.stringDirection(t);this.emit("swipe"+e.x),this.emit("swipe"+e.y),this.emit("swipe")}}},{key:"pan",value:function(){this.emit("pan")}},{key:"pan2",value:function(){this.emit("pan2")}},{key:"pinch",value:function(t){this.emit("pinch",{distance:t})}},{key:"rotate",value:function(t){this.emit("rotate",{rotation:t})}},{key:"emit",value:function(t,e){if(this.events[t]){return this.events[t](this.setEventData(e))===!1&&this.clear()}}},{key:"setEventData",value:function(t){var e=void 0,i=void 0,n=void 0;return this.ended?(e=this.utils.coords(this.started,this.ended),i=this.utils.stringDirection(e)):(this.ended=this.utils.create(null),e={x:this.started.touches[0].clientX,y:this.started.touches[0].clientY}),n=(this.ended.time-this.started.time)/1e3,Object.assign({},{el:this.el,coords:e,directions:i,velocity:{x:e.x/n,y:e.y/n,d:this.utils.scalar(e.x,e.y)/n},fingers:this.utils.howManyTouches(this.ended),$state:this.stateValue,$event:this.$event,duration:n},t)}},{key:"attach",value:function(t){var e=this;Object.keys(t).forEach(function(i){return e.events[i]=t[i]})}},{key:"detach",value:function(t){var e=this;t="Array"===t.constructor.name?t:[t],t.forEach(function(t){return e.events[t]&&delete e.events[t]})}},{key:"on",value:function(t,e,i){var n=this;t.split(" ").forEach(function(t){return n.el.addEventListener(t,e,!!i&&{passive:!0})})}},{key:"off",value:function(t,e,i){var n=this;t.split(" ").forEach(function(t){return n.el.removeEventListener(t,e,!!i&&{passive:!0})})}}]),t}();e.default=f},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s={init:function(){return{pan:{x:null,y:null},pinch:null,rotate:null}},create:function(){return Object.assign({},s.init(),{$old:s.init()})},set:function(t,e,i){return e.rotate&&(t.rotate=e.rotate+t.$old.rotate),e.pinch&&(t.pinch=e.pinch+t.$old.pinch),e.pan&&e.pan.x&&(t.pan.x=e.pan.x+t.$old.pan.x),e.pan&&e.pan.y&&(t.pan.y=e.pan.y+t.$old.pan.y),Object.keys(i).forEach(function(e){return t[e]=i[e](t)}),t},refresh:function(t){return t.$old=s.copyState(t),t},copyState:function(t){var e={};return Object.keys(t).forEach(function(i){"$old"!=i&&(e[i]="object"===n(t[i])&&null!==t[i]?s.copyState(t[i]):t[i])}),e}};e.default={set:s.set,create:s.create,refresh:s.refresh}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={create:function(t,e,i){var s=i?Object.assign({},i,{updated:!0}):{time:Date.now()};return s.touches=t&&t.touches?n.getTouches(t.touches,e):[{clientX:0,clientY:0}],s},getTouches:function(t,e){var i=[];return Object.keys(t).forEach(function(s){n.validate(t[s],e)&&i.push({clientX:t[s].clientX,clientY:t[s].clientY})}),i},validate:function(t,e){return t&&(t.clientX||t.clientY)&&(!e||e==t.target)},coords:function(t,e){return n.diff(t.touches[0],e.touches[0])},diff:function(t,e){return{x:e.clientX-t.clientX,y:e.clientY-t.clientY}},howManyTouches:function(t){return t&&t.touches?t.touches.length:0},isVertical:function(t,e){var i=n.coords(t,e);return Math.abs(i.y)>Math.abs(i.x)},isHorizontal:function(t,e){var i=n.coords(t,e);return Math.abs(i.x)>Math.abs(i.y)},stringDirection:function(t){return{x:t.x<=0?"Left":"Right",y:t.y<=0?"Top":"Bottom"}},distanceBetween:function(t,e){return n.distance(e)-n.distance(t)},distance:function t(e){var t=n.diff(e.touches[0],e.touches[1]);return n.scalar(t.x,t.y)},scalar:function(t,e){return Math.sqrt(Math.pow(t,2)+Math.pow(e,2))},direction:function(t){var e=n.diff(t.touches[0],t.touches[1]);return n.angle(e.x,e.y)},angle:function(t,e){return 180*Math.atan2(e,t)/Math.PI},rotation:function(t,e){return n.direction(e)-n.direction(t)}};e.default={create:n.create,coords:n.coords,howManyTouches:n.howManyTouches,isVertical:n.isVertical,isHorizontal:n.isHorizontal,stringDirection:n.stringDirection,distanceBetween:n.distanceBetween,direction:n.direction,rotation:n.rotation,angle:n.angle,scalar:n.scalar}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var s=i(0),o=n(s);e.default=AloeTouch={length:0,list:{},bind:function(t,e,i){var n=++AloeTouch.length;return AloeTouch.list[n]={$id:n,attach:AloeTouch.caller("attach"),detach:AloeTouch.caller("detach"),setState:AloeTouch.caller("setState"),getState:AloeTouch.caller("getState"),removeState:AloeTouch.caller("removeState"),clearState:AloeTouch.caller("clearState"),isLock:AloeTouch.caller("isLock"),lock:AloeTouch.caller("lock"),unlock:AloeTouch.caller("unlock"),$ref:new o.default(n,t,e,i)}},caller:function(t){return function(e){this.$ref&&this.$ref[t](e)}},unbind:function(t){var e=this.getIds(t,!0);return!!e&&(AloeTouch.list[e].lock(),delete AloeTouch.list[e].$ref,delete AloeTouch.list[e],!0)},get:function(t){return AloeTouch.list.hasOwnProperty(t)?AloeTouch.list[t]:null},getIds:function(t,e){return t="Array"===t.constructor.name?t:[t],t=t.map(function(t){return"number"==typeof t?AloeTouch.get(t)?t:null:t.$ref?t.$id:null}),t=t.filter(function(t){return!!t}),e&&1==t.length?t[0]:t},lock:function(t){t?AloeTouch.list[t].lock():AloeTouch.map(function(t){return t.lock()})},lockExcept:function(t){ids=this.getIds(ids)||[],AloeTouch.map(function(t,e){return t[ids.indexOf(e)==-1?"unlock":"lock"]()})},lockOnly:function(t){ids=this.getIds(ids)||[],AloeTouch.map(function(t,e){return t[ids.indexOf(e)>=0?"lock":"unlock"]()})},unlock:function(t){t?AloeTouch.list[t].unlock():AloeTouch.map(function(t){return t.unlock()})},unlockExcept:function(t){AloeTouch.lockOnly(t)},unlockOnly:function(t){AloeTouch.lockExcept(t)},map:function(t){Object.keys(AloeTouch.list).forEach(function(e){return t(AloeTouch.list[e],e)})}}}]);
//# sourceMappingURL=aloetouch.min.js.map