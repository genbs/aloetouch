{"version":3,"sources":["webpack://AloeTouch/webpack/bootstrap","webpack://AloeTouch/./src/AloeTouch.js","webpack://AloeTouch/./src/classes/AloeTouchObject.js","webpack://AloeTouch/./src/classes/Dispatcher.js","webpack://AloeTouch/./src/classes/Emitter.js","webpack://AloeTouch/./src/classes/State.js","webpack://AloeTouch/./src/services/Events.js","webpack://AloeTouch/./src/services/Utils.js","webpack://AloeTouch/./src/services/constants.js"],"names":["AloeTouch","version","increment","list","bind","element","events","settings","id","ato","AloeTouchObject","public","el","setAttribute","unbind","aloetouchobject","nodeType","getAttribute","getIds","lock","$ref","get","hasOwnProperty","aloetouchobjects","first","constructor","name","map","$id","filter","lockExcept","ids","indexOf","lockOnly","unlock","unlockExcept","unlockOnly","callable","Object","keys","forEach","DEFAULT_SETTINGS","strict","stopPropagation","isPermissible","onlyX","onlyY","document","querySelector","assign","locked","getPublicMethods","Dispatcher","start","move","finish","style","willChange","event","getTouches","isStarted","end","stopImmediatePropagation","preventDefault","dispatch","clear","coords","started","ended","time","Date","now","_isHorizontal","isHorizontal","_isVertical","isVertical","cancelable","ALOETOUCH_MIN_TIME","off","on","handler","passive","split","e","addEventListener","removeEventListener","attach","Emitter","detach","getState","State","clearState","addState","state","add","removeState","remove","isLock","lastTap","touches","_fingers","fingers","prepare","emitAfter","ALOETOUCH_PRESS_MIN_TIME","emit","final","dispatchFinalEvents","dispatchMovedEvents","dispatchSwipe","dispatchTap","clearAfter","ALOETOUCH_DBL_TAP_TIME","refresh","initialData","after","eventName","Events","data","delay","callback","window","setTimeout","clearTimeout","setStateData","$state","pan","pinch","distanceBetween","rotate","rotation","set","customState","old","empty","values","x","y","cs","copy","d","n","k","s","nativeEvent","$event","isSwipe","directions","stringDirection","Math","abs","ALOETOUCH_MIN_SWIPE_DISTANCE","tap","dbltap","press","swipe","swipeLeft","swipeRight","swipeTop","swipeBottom","pan2","validate","push","screenX","screenY","touch","contains","target","ATOstart","ATOend","diff","pointA","pointB","ATO","length","_coords","velocity","duration","scalar","distance","a","b","sqrt","pow","direction","angle","atan2","PI"],"mappings":"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","file":"./dist/aloetouch.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/AloeTouch.js\");\n","import AloeTouchObject from './classes/AloeTouchObject'\n\n/**\n * AloeTouch\n */\nlet AloeTouch = {\n\n    /**\n     * Version\n     *\n     * @type {String}\n     */\n    version: '0.0.2',\n\n    /**\n     * Contiene il numero di elementi\n     *\n     * @type {Number}\n     */\n    increment: 0,\n\n    /**\n     * Lista degli AloeTouchObject\n     *\n     * @type {Object}\n     */\n    list: {},\n\n    /**\n     * Binda un nuovo elemento\n     *\n     * @param {DOMElement} element Elemento da bindare\n     * @param {Object}     events  Eventi da assegnare all'elemento\n     * @param {Object}    settings Impostazioni per l'ATO\n     */\n    bind(element, events, settings)\n    {\n        let id = ++AloeTouch.increment\n\n        let ato = new AloeTouchObject( id, element, events, settings ).public\n        ato.el.setAttribute('aloetouch-data-id', id)\n\n        return ( AloeTouch.list[id] = ato )\n    },\n\n\n    /**\n     * Rimuove i listener ad un elemento\n     *\n     * @param {AloeTouchObject or Numer} aloetouchobject\n     * @return {Boolean} true se l'elemento è stato rimosso, falso altrimenti\n     */\n    unbind(aloetouchobject)\n    {\n        let id = aloetouchobject.nodeType ? aloetouchobject.getAttribute('aloetouch-data-id') : this.getIds(aloetouchobject, true)\n\n        if(id) {\n            AloeTouch.list[id].lock()\n            delete AloeTouch.list[id].$ref\n            delete AloeTouch.list[id]\n            return true\n        }\n\n        return false\n    },\n\n    /**\n     * Ritorna un elemento in base al suo id\n     *\n     * @param {Number} id\n     */\n    get(id)\n    {\n        return AloeTouch.list.hasOwnProperty(id) ? AloeTouch.list[id] : null\n    },\n\n    /**\n     * Ritorna un' array di id\n     *\n     * @param {Array<AloeTouchObject or Number>} aloetouchobjects\n     * @param {Boolean} first Ritorna un id se l'array ha lunghezza pari a uno\n     * @return {Array<Number> or Number}\n     */\n    getIds(aloetouchobjects, first)\n    {\n        aloetouchobjects = aloetouchobjects.constructor.name === 'Array' ? aloetouchobjects : [aloetouchobjects]\n        aloetouchobjects = aloetouchobjects.map( ato => typeof ato === 'number' ? ( AloeTouch.get(ato) ? ato : null ) : ( ato.$ref ? ato.$id : null ) )\n        aloetouchobjects = aloetouchobjects.filter(id => !!id)\n\n        return first ? aloetouchobjects[0] : aloetouchobjects\n    },\n\n    /**\n     * Blocca un oggetto singolo o tutti\n     *\n     * @param {Number?} id Blocca gli eventi per l'oggetto con id 'id'\n     */\n    lock(id)\n    {\n        id ? AloeTouch.list[id].lock() : AloeTouch.map(ato => ato.lock())\n    },\n\n    /**\n     *  Blocca tutti gli oggetti tranne quelli presenti nell'array ids\n     *\n     * @param {Array<AloeTouchObject or Number>} ids\n     */\n    lockExcept(ids)\n    {\n        ids = this.getIds(ids) || []\n\n        AloeTouch.map((ato, id) => ato[ids.indexOf(id) == -1 ? 'unlock' : 'lock']())\n    },\n\n    /**\n     * Blocca solo gli oggetti presenti in ids\n     *\n     * @param {Array<AloeTouchObject or Number>} ids\n     */\n    lockOnly(ids)\n    {\n        ids = this.getIds(ids) || []\n\n        AloeTouch.map((ato, id) => ato[ids.indexOf(id) >= 0 ? 'lock' : 'unlock']())\n    },\n\n    /**\n     * Abilita li eventi ad un oggetto singolo o tutti\n     *\n     * @param {Number?} id\n     */\n    unlock(id)\n    {\n        id ? AloeTouch.list[id].unlock() : AloeTouch.map(ato => ato.unlock())\n    },\n\n    /**\n     * Abilita gli eventi tranne agli elementi presenti nell'array aloetouchobjects\n     *\n     * @param {Array<AloeTouchObject or Number>} aloetouchobjects\n     */\n    unlockExcept(aloetouchobjects)\n    {\n        AloeTouch.lockOnly(aloetouchobjects)\n    },\n\n    /**\n     * Abilita gli eventi solo agli elementi presenti nell'array ids\n     *\n     * @param {Array<AloeTouchObject or Number>} ids\n     */\n    unlockOnly(ids)\n    {\n        AloeTouch.lockExcept(ids)\n    },\n\n    /**\n     * Mappa tutti li elementi bindati\n     *\n     * @param {Callable(AloeTouchObject, id)}\n     */\n    map(callable) {\n        Object.keys(AloeTouch.list).forEach(id => callable(AloeTouch.list[id], id))\n    }\n\n}\n\nexport default AloeTouch","import { ALOETOUCH_MIN_TIME } from '../services/constants'\nimport { getTouches, isHorizontal, isVertical, coords } from '../services/Utils'\n\nimport Dispatcher from './Dispatcher'\n\n/**\n * Settaggi di default\n * @type Object\n */\nconst DEFAULT_SETTINGS = {\n    strict: false,\n    stopPropagation: false,\n    isPermissible: null,\n    onlyX: false,\n    onlyY: false\n}\n\n/**\n * Assegna gli eventi touch ad un elemento\n *\n * GLi eventi disponibili sono:\n * Touch singolo\n *     tap, dbltap, press, pan, swipe, swipeLeft, swipeRight, swipeTop, swipeBottom\n * Touch doppio\n *     pan2, pinch, rotate\n */\nexport default class AloeTouchObject {\n\n    /**\n     * Binda gli eventi all'elemento\n     * @param {DomElement} element\n     * @param {Object} events Oggetto che contiene le funzioni es. { tap: ..., swipeLeft: ..., rotate: ... }\n     * @param {Object<Boolean>} strict\n     */\n    constructor(id, element, events, settings)\n    {\n        this.id = id\n        this.el = typeof element === 'string' ? document.querySelector(element) : element\n        this.settings = Object.assign({}, DEFAULT_SETTINGS, settings)\n\n        this.locked = true\n\n        this.public = this.getPublicMethods()\n\n        this.Dispatcher = new Dispatcher(id, this.el, events, this.public)\n\n        this.start = this.start.bind(this)\n        this.move = this.move.bind(this)\n        this.finish = this.finish.bind(this)\n\n        this.unlock()\n\n        this.el.style.willChange = 'transform'\n    }\n\n    /**\n     * Eventi 'touchstart' 'mousedown'\n     */\n    start(event)\n    {\n        !this.locked && this.Dispatcher.start( event, getTouches(event, this.el, this.settings.strict), this.settings.stopPropagation )\n    }\n\n    /**\n     * Eventi 'touchmove'\n     */\n    move(event)\n    {\n        if(\n            !this.locked &&\n            this.Dispatcher.isStarted() &&\n            this.Dispatcher.end(event, getTouches(event, this.el, this.settings.strict) ) &&\n            this.isPermissible(event)\n        ) {\n            if(this.settings.stopPropagation === true || this.settings.stopPropagation === 1) event.stopPropagation()\n            if(this.settings.stopPropagation === true || this.settings.stopPropagation === 2) event.stopImmediatePropagation()\n            event.preventDefault()\n\n            this.Dispatcher.dispatch(null, event)\n        } else {\n            this.Dispatcher.clear()\n        }\n    }\n\n    /**\n     * Questa funzionalitò è molto importante poiché previene che l'evento 'touchmove'\n     * prevenga l'azione di default dell'evento (e quindi blocchi lo scrolling)\n     */\n    isPermissible(event)\n    {\n        return this.settings.isPermissible ? this.settings.isPermissible(event, coords(this.Dispatcher.started, this.Dispatcher.ended), this.Dispatcher.started, this.Dispatcher.ended) : (() => {\n            let time = Date.now() - this.Dispatcher.started.time\n            let _isHorizontal = isHorizontal(this.Dispatcher.started, this.Dispatcher.ended)\n            let _isVertical = isVertical(this.Dispatcher.started, this.Dispatcher.ended)\n\n            return event.cancelable && (\n                ((!this.settings.onlyX && !this.settings.onlyY && time > ALOETOUCH_MIN_TIME) || _isHorizontal) ||\n                (this.settings.onlyX && _isHorizontal) ||\n                (this.settings.onlyY && _isVertical)\n            )\n        })()\n    }\n\n    /**\n     * Termino l'evento\n     */\n    finish(event)\n    {\n        if (!this.locked && this.Dispatcher.isStarted()) {\n            this.Dispatcher.dispatch(true, event)\n            \n            if (this.settings.stopPropagation) {    \n                event.stopPropagation()\n                event.stopImmediatePropagation()\n            }\n        }\n    }\n\n    /**\n     * Ritorna vero se questo oggetto è bloccato, falso altrimenti\n     *\n     * @return {Boolean}\n     */\n    isLock() {\n        return this.locked\n    }\n\n    /**\n     * Rimuove i listener degli eventi\n     */\n    lock()\n    {\n        if( !this.locked ) {\n            this.off('touchstart', this.start, true)\n            this.off('touchmove', this.move, true)\n            this.off('touchend touchcancel', this.finish, true)\n            this.locked = true\n        }\n    }\n\n    /**\n     * Binda gli eventi\n     */\n    unlock()\n    {\n        if( this.locked ) {\n            this.on('touchstart', this.start)\n            this.on('touchmove', this.move)\n            this.on('touchend touchleave touchcancel', this.finish, true)\n            this.locked = false\n        }\n    }\n\n    /**\n     * Bindo gli eventi all'elemento\n     */\n    on(events, handler, passive)\n    {\n        events.split(' ').forEach( e => this.el.addEventListener(e, handler, passive ? { passive: true } : true) )\n    }\n\n    /**\n     * Rimuovo i listeners\n     */\n    off(events, handler)\n    {\n        events.split(' ').forEach( e => this.el.removeEventListener(e, handler, true) )\n    }\n\n    /**\n     * Helper per una chiamata più semplice alle funzioni\n     */\n    getPublicMethods()\n    {\n        let ato = this\n\n        return {\n            el: this.el,\n            $id: this.id,\n\n            attach(events){ ato.Dispatcher.Emitter.attach(events) },\n            detach(events){ ato.Dispatcher.Emitter.detach(events) },\n\n            getState: () => ato.Dispatcher.Emitter.State.get(),\n            clearState(){ ato.Dispatcher.Emitter.State.clear() },\n            addState(state){ ato.Dispatcher.Emitter.State.add(state) },\n            removeState(name){ ato.Dispatcher.Emitter.State.remove(name) },\n\n            lock(){ ato.lock() },\n            unlock(){ ato.unlock() },\n            isLock: () => ato.isLock(),\n\n            $ref: this\n        }\n    }\n\n}\n\n","import { ALOETOUCH_PRESS_MIN_TIME, ALOETOUCH_DBL_TAP_TIME } from '../services/constants'\nimport { fingers } from '../services/Utils'\n\nimport Emitter from './Emitter'\n\n/**\n * Dispatcher - smistare gli eventi\n */\nexport default class Dispatcher {\n\n    /**\n     * Binda l'Emtitter che chiamerà gli eventi\n     */\n    constructor(id, element, events, ato)\n    {\n        this.Emitter = new Emitter(id, element, events || {}, ato)\n        this.started = null\n        this.ended = null\n        this.lastTap = null\n    }\n\n    /**\n     * Setta l'evento iniziale\n     * Binderà l'evento press nel caso in cui l'utente non rilascerà o muoverà l'elemento\n     */\n    start(event, touches, stopPropagation)\n    {\n        //if (!event.cancelable)\n            //return this.clear()\n\n        !this.started ? ( this.started = { time: Date.now(), touches } ) : ( this.started.touches = touches )\n\n        let _fingers = fingers(this.started)\n\n        if( _fingers ) {\n            this.Emitter.prepare(this.started)\n            this.Emitter.emitAfter('press', ALOETOUCH_PRESS_MIN_TIME)\n            this.Emitter.emit('start', event)\n            \n            if (_fingers > 1) {\n                event.preventDefault() // Blocca lo scrolling nel caso in cui l'utente abbia toccato l'elemento con più di un dito\n                \n                if (stopPropagation) {\n                    if(stopPropagation === true || stopPropagation === 1) event.stopPropagation()\n                    if(stopPropagation === true || stopPropagation === 2) event.stopImmediatePropagation()\n                }\n            }\n        }\n    }\n\n    /**\n     * Ritorna vero se l'evento è stato inizializzato correttamente\n     */\n    isStarted()\n    {\n        return !!this.started\n    }\n\n    /**\n     * Setta il punto corrente ( richiamato dalla gestore dell'evento touchmove: AloeTouchObject@move )\n     */\n    end(event, touches)\n    {\n        this.ended = { time: Date.now(), touches }\n\n        return fingers(this.started) == fingers(this.ended)\n    }\n\n    /**\n     * Smisto gli eventi in 'touchmove' in base al numero di tocchi in base alla tipologia dell'evento\n     *\n     * @param {Boolean} final Questo valore è settato a true se questa funzione è chiamanta dall'evento touchend o touchcancel\n     * @param {Event} \n     */\n    dispatch(final, event)\n    {\n        let _fingers = fingers(this.ended)\n\n        this.Emitter.prepare(this.started, this.ended, _fingers, !!final)\n\n        final ? this.dispatchFinalEvents(!!this.ended, event) : this.dispatchMovedEvents(_fingers, event) // Smisto al tipo di eventi\n    }\n\n    /**\n     * Gestione degli eventi che non richiedono movimento\n     */\n    dispatchFinalEvents(move, event)\n    {\n        move ? this.dispatchSwipe(event) : this.dispatchTap(event)\n        this.Emitter.emit('end', event)\n        this.clear()\n    }\n\n    /**\n     * Gestione degli eventi con movimento\n     */\n    dispatchMovedEvents(_fingers, event)\n    {\n        this.Emitter.clearAfter('press') // l'evento press non è più valido se l'utente si muove sull'elemento\n\n        // Smisto gli eventi in base al numero dei tocchi\n        if( _fingers == 1)\n           this.Emitter.emit('pan', event)\n        else if( _fingers == 2 ) {\n            this.Emitter.emit('pan2', event)\n            this.Emitter.emit('pinch', event)\n            this.Emitter.emit('rotate', event)\n        }\n\n        this.Emitter.emit('move', event) // Chiamo l'evento speciale 'move' in ogni caso\n    }\n\n    /**\n     * Gestione dell'evento particolare 'tap' e 'dbltap'\n     */\n    dispatchTap(event)\n    {\n        if(!this.lastTap) {\n            this.lastTap = this.started.time\n            this.Emitter.emitAfter('tap', ALOETOUCH_DBL_TAP_TIME, () => this.lastTap = null)\n        } else if( this.started.time - this.lastTap < ALOETOUCH_DBL_TAP_TIME ) {\n            this.Emitter.clearAfter('tap') \n            this.Emitter.emit('dbltap', event) \n            this.lastTap = null\n        }\n    }\n\n    /**\n     * Gestione dell'evento 'swipe'\n     */\n    dispatchSwipe(event)\n    {\n        this.Emitter.emit('swipe', event)\n        this.Emitter.emit('swipeLeft', event)\n        this.Emitter.emit('swipeRight', event)\n        this.Emitter.emit('swipeTop', event)\n        this.Emitter.emit('swipeBottom', event)\n    }\n\n    /**\n     * Reset delle variabili\n     */\n    clear()\n    {\n        this.started = null\n        this.ended = null\n\n        this.Emitter.clearAfter('press')\n        this.Emitter.State.refresh()\n    }\n\n}","import { coords, rotation, distanceBetween } from '../services/Utils'\nimport Events from '../services/Events'\nimport State from './State'\n\n/* -------------------------------------\n *  Bindaggio ed emissione eventi\n * ------------------------------------- */\n\nexport default class Emitter {\n\n    /**\n     * Gestore degli eventi e relativi argomenti\n     */\n    constructor(id, el, events, ato)\n    {\n        this.ato = ato\n        this.events = events\n        this.State = new State(events.state || {})\n\n        this.initialData = { id, el, ato }\n        this.after = {}\n\n        this.detach('state')\n    }\n\n    /**\n     * Emette un evento se settato\n     *\n     * @param {String} eventName Nome dell'evento da emettere\n     * @param {Event} event\n     */\n    emit(eventName, event)\n    {\n        if (Events.emit(eventName, this.data, this.events[eventName], event) === false)\n            this.detach(eventName)    \n    }\n\n    /**\n     * Emette un evento dopo un certo 'delay'\n     *\n     * @param {String}     event Nome dell'evento da emettere\n     * @param {Int}        delay Millisecondi da ritardare\n     * @param {Callable?}  callback Funzione da chiamare dopo il delay\n     */\n    emitAfter(event, delay, callback)\n    {\n        this.clearAfter(event)\n\n        this.after[event] = window.setTimeout(() => {\n            this.emit(event)\n            callback && callback()\n        }, delay)\n    }\n\n    /**\n     * Rimuove un evento da ritardare\n     *\n     * @param {String?} event Nome dell'evento da rimuovere. Se non settato, verranno rimossi tutti.\n     */\n    clearAfter(event)\n    {\n        if( typeof event === 'undefined' )\n            Object.keys(this.after).forEach(e => this.clearAfter(e))\n        else {\n            this.after[event] && window.clearTimeout(this.after[event])\n            this.after[event] = null\n            delete this.after[event]\n        }\n    }\n\n\n    /**\n     * Prepare i dati da inviare agli eventi\n     */\n    prepare(started, ended, fingers, final)\n    {\n        this.data = Object.assign({}, this.initialData, { started, ended, fingers, final })\n\n        this.setStateData(started, ended, fingers, final) // Setta lo state se si sta 'preparando' un evento non finale\n\n        this.data.$state = this.State.get()\n    }\n\n    /**\n     * Prepara la variabile che conterrà lo 'state'\n     */\n    setStateData(started, ended, fingers, final)\n    {\n        if( fingers == 1 )\n            this.data.pan = coords(started, ended)\n        else if( fingers == 2) {\n            this.data.pan = coords(started, ended)\n            this.data.pinch = distanceBetween(started, ended)\n            this.data.rotate = rotation(started, ended)\n        }\n        !final && this.State.set(this.data)\n    }\n\n    /**\n     * Aggiunge un evento\n     */\n    attach(events)\n    {\n        Object.keys(events).forEach( e => this.events[e] = events[e] )\n    }\n\n    /**\n     * Rimuove un evento\n     */\n    detach(events)\n    {\n        events = events.constructor.name === 'Array' ? events : [events]\n        events.forEach(e => this.events[e] && delete this.events[e])\n    }\n\n\n}","\n/* -------------------------------------\n *  State\n * ------------------------------------- */\n\nexport default class State {\n\n    /**\n     * Setta gli state personalizzati\n     */\n    constructor(customState)\n    {\n        this.customState = customState\n\n        this.old = this.empty()\n        this.values = this.empty()\n    }\n\n    /**\n     * Ritorna uno state vuoto\n     * @return {Object}\n     */\n    empty() {\n        return {\n            pan: { x: 0, y: 0 },\n            pinch: 0,\n            rotate: 0\n        }\n    }\n\n    /**\n     * Binda i nuovi valori dall'evento corrente (chiamato da touchmove->dispatch->emit) con i valori precendenti\n     *\n     * @param {ATS} state\n     * @param {ATEvent} event\n     */\n    set(data)\n    {\n        data.rotate && ( this.values.rotate = data.rotate + this.old.rotate )\n        data.pinch && ( this.values.pinch = data.pinch + this.old.pinch )\n        data.pan && data.pan.x && ( this.values.pan.x = data.pan.x + this.old.pan.x )\n        data.pan && data.pan.y && ( this.values.pan.y = data.pan.y + this.old.pan.y )\n\n        // Aggiungo gli state settati dall'utente\n        Object.keys(this.customState).forEach( cs => this.values[cs] = this.customState[cs](this.values) )\n\n        return this.get()\n    }\n\n    /**\n     * Ritorna i valori dello state corrente\n     */\n    get()\n    {\n        return this.values\n    }\n\n    /**\n     * All'evento touchend setto i valori precendeti con l'ultimo settato\n     *\n     * @param {ATS} state\n     */\n    refresh()\n    {\n        this.old = this.copy(this.values)\n    }\n\n    /**\n     * Copia un oggetto\n     *\n     * @return {Object}\n     */\n    copy(d)\n    {\n        let n = {}\n        Object.keys(d).forEach( k => {\n            n[k] = typeof(d[k]) === 'object' && d[k] !== null ? this.copy(d[k]) : d[k]\n        })\n        return n\n    }\n\n\n    /**\n     * Setta uno state\n     *\n     * @param {Object} state\n     */\n    add(state)\n    {\n        Object.keys(state).forEach( s => this.customState[s] = state[s] )\n        this.set({})\n    }\n\n    /**\n     * Rimuove uno state\n     *\n     * @param {String} name Nome dello state da rimuovere\n     */\n    remove(name)\n    {\n        this.values[name] = null\n        this.values[name] = null\n\n        delete this.values[name]\n        delete this.values[name]\n    }\n\n    /**\n     * Cancella lo state con ivalori correnti\n     */\n    clear()\n    {\n        this.values = this.empty()\n        this.old = this.empty()\n    }\n}","import { ALOETOUCH_PRESS_MIN_TIME, ALOETOUCH_MIN_SWIPE_DISTANCE } from './constants'\nimport { stringDirection } from './Utils'\n\n/* -------------------------------------\n *  Eventi\n * ------------------------------------- */\n\n/**\n * Lista di tutti gli eventi gestibili\n * @type {Array<String>}\n */\nconst events = [\n    'start', 'move', 'end', // Eventi speciali\n    'tap', 'dbltap', 'press', 'swipe', 'swipeTop', 'swipeBottom', 'swipeLeft', 'swipeRight', 'pan', // Eventi un solo dito\n    'pan2', 'pinch', 'rotate' // Eventi due dita\n]\n\nexport default  {\n\n    /**\n     * Richiama gli altri eventi\n     */\n    emit(event, values, callback, nativeEvent)\n    {\n        if (events.indexOf(event) >= 0 && this[event] && callback) {\n            values.$event = nativeEvent\n            return this[event](values, callback)\n        }\n    },\n\n    /**\n     * Special Event\n     */\n    start(values, callback){ return callback(values) },\n\n    /**\n     * Special Event\n     */\n    move(values, callback){ return callback(values) },\n\n    /**\n     * Special Event\n     */\n    end(values, callback){\n        let coords = values.pan\n\n        if( coords ) {\n            values.isSwipe = false\n            let directions = stringDirection(coords)\n\n            if( Math.abs(coords.x) > ALOETOUCH_MIN_SWIPE_DISTANCE ) {\n                values.isSwipe = true\n                values.directions ? ( values.directions.x = directions.x ) : ( values.directions = { x: directions.x } )\n            }\n\n            if( Math.abs(coords.y) > ALOETOUCH_MIN_SWIPE_DISTANCE ) {\n                values.isSwipe = true\n                values.directions ? ( values.directions.y = directions.y ) : ( values.directions = { y: directions.y } )\n            }\n        }\n\n        return callback(values)\n    },\n\n    /**\n     * Valido l'evento Tap\n     */\n    tap(values, callback)\n    {\n        if( Date.now() - values.started.time < ALOETOUCH_PRESS_MIN_TIME )\n            return callback()\n    },\n\n    /**\n     * Evento doppio tap\n     * ( Validazione nell'Emitter )\n     */\n    dbltap(values, callback){ return callback() },\n\n    /**\n     * Evento press\n     * ( Validazione nell'Emitter )\n     */\n    press(values, callback){ return callback() },\n\n    /**\n     * Valido l'evento swipe\n     */\n    swipe(values, callback)\n    {\n        let coords = values.pan\n        let directions = stringDirection(coords)\n\n        if( Math.abs(coords.x) > ALOETOUCH_MIN_SWIPE_DISTANCE || Math.abs(coords.y) > ALOETOUCH_MIN_SWIPE_DISTANCE )\n            return callback({ coords, directions }, values)\n    },\n\n     /**\n     * Valido l'evento swipeLeft\n     */\n    swipeLeft(values, callback)\n    {\n        let coords = values.pan\n        if(coords.x < 0 && Math.abs(coords.x) > ALOETOUCH_MIN_SWIPE_DISTANCE )\n            return callback({ coords }, values)\n    },\n\n    /**\n     * Valido l'evento swipeRight\n     */\n    swipeRight(values, callback)\n    {\n        let coords = values.pan\n        if( coords.x > 0 && Math.abs(coords.x) > ALOETOUCH_MIN_SWIPE_DISTANCE )\n            return callback({ coords }, values)\n    },\n\n    /**\n     * Valido l'evento swipeTop\n     */\n    swipeTop(values, callback)\n    {\n        let coords = values.pan\n        if( Math.abs(coords.y) > ALOETOUCH_MIN_SWIPE_DISTANCE )\n            return callback({ coords }, values)\n    },\n\n    /**\n     * Valido l'evento swipeBottom\n     */\n    swipeBottom(values, callback)\n    {\n        let coords = values.pan\n        if( Math.abs(values.pan.y) > ALOETOUCH_MIN_SWIPE_DISTANCE )\n            return callback({ coords }, values)\n    },\n\n    /**\n     * L'evento pan non ha bisogno di validazioni, siccome sono state fatte nel metodo move\n     *\n     * @param {Object} coords\n     */\n    pan(values, callback)\n    {\n        return callback(values.pan, values)\n    },\n\n    /**\n     * L'evento pan non ha bisogno di validazioni, siccome sono state fatte nel metodo move\n     *\n     * @param {Object} coords\n     */\n    pan2(values, callback)\n    {\n        return callback(values.pan, values)\n    },\n\n    /**\n     * L'evento pinch non ha bisogno di validazioni, siccome sono state fatte nel metodo move\n     *\n     * @param {Number} distance\n     */\n    pinch(values, callback)\n    {\n        return callback(values.pinch, values)\n    },\n\n    /**\n     * L'evento rotate non ha bisogno di validazioni, siccome sono state fatte nel metodo move\n     *\n     * @param {Number} rotation\n     */\n    rotate(values, callback)\n    {\n        return callback(values.rotation, values)\n    }\n\n}","/**\n * Preleva la touchlist (modificata) dall'evento\n *\n * @param  {Touchlist}  touches [description]\n * @param  {DOMElement} element L'emento esiste solo se è settato STRICT\n * @param  {Boolean}    strict\n * @return {Array}\n */\nexport function getTouches(event, element, strict){\n\n    let data = []\n    let touches = event.touches ? event.touches : { 'e': event }\n\n    Object.keys(touches).forEach(e => {\n        validate(touches[e], element, strict) && data.push({\n            screenX: touches[e].screenX,\n            screenY: touches[e].screenY\n        })\n    })\n\n    return data\n}\n\n/**\n * Aggiunge l'oggetto Touch se rispetta la validazone\n *\n * @param {Touch}      touch\n * @param {DOMElement} element\n * @param {Boolean}    strict\n */\nexport function validate(touch, element, strict)\n{\n    return touch && ( touch.screenX || touch.screenY ) && ( !strict ? element.contains(touch.target) : element == touch.target )\n}\n\n\n/**\n * Ritorna la differenza delle coordinate tra due ATO\n *\n * @param {ATO} ATOstart\n * @param {ATO} ATOend\n */\nexport function coords(ATOstart, ATOend)\n{\n    return diff(ATOstart.touches[0], ATOend.touches[0])\n}\n\n/**\n * Ritorna una coordinata basata sulla differenza tra due punti\n *\n * @param {ATO.touch} pointA\n * @param {ATO.touch} pointB\n */\nexport function diff(pointA, pointB)\n{\n    return {\n        x: pointB.screenX - pointA.screenX,\n        y: pointB.screenY - pointA.screenY\n    }\n}\n\n/**\n * Ritorna il numero di touch\n *\n * @param {ATO} ATOe\n */\nexport function fingers(ATO)\n{\n    return ATO && ATO.touches ? ATO.touches.length : 0\n}\n\n/**\n * Ritorna true se la differenza tra le coordinate è principalmente verticale\n *\n * @param {ATO} ATOstart\n * @param {ATO} ATOend\n */\nexport function isVertical(ATOstart, ATOend)\n{\n    let _coords = coords(ATOstart, ATOend)\n    return Math.abs(_coords.y) > Math.abs(_coords.x)\n}\n\n\n/**\n * Ritorna true se la differenza tra le coordinate è principalmente orizzontale\n *\n * @param {ATO} ATOstart\n * @param {ATO} ATOend\n */\nexport function isHorizontal(ATOstart, ATOend)\n{\n    let _coords = coords(ATOstart, ATOend)\n    return Math.abs(_coords.x) > Math.abs(_coords.y)\n}\n\n/**\n * Ritorna la direzione in base al valore delle coordinate\n *\n * @param {Object{x,y} } coords\n */\nexport function stringDirection(_coords)\n{\n    return {\n        x: _coords.x <= 0 ? 'Left' : 'Right',\n        y: _coords.y <= 0 ? 'Top' : 'Bottom'\n    }\n}\n\nexport function velocity(ATOstart, ATOend)\n{\n    let _coords = coords(ATOstart, ATOend)\n    let duration = (ATOend.time - ATOstart.time) / 1000\n\n    return {\n        x: _coords.x / duration,\n        y: _coords.y / duration,\n        d: scalar(_coords.x, _coords.y) / duration\n    }\n}\n\n/**\n * Ritorna la distanza tra due ATO\n *\n * @param {ATO} ATOstart\n * @param {ATO} ATOend\n */\nexport function distanceBetween(ATOstart, ATOend)\n{\n    return distance(ATOend) - distance(ATOstart)\n}\n\n/**\n * Ritorna la distanza vettoriale tra due coordinata\n *\n * @param {ATO} ATO\n */\nexport function distance(ATO)\n{\n    let distance = diff(ATO.touches[0], ATO.touches[1])\n    return scalar(distance.x, distance.y)\n}\n\n/**\n * Distanza scalare\n */\nexport function scalar(a, b)\n{\n    return Math.sqrt(Math.pow(a, 2) +  Math.pow(b, 2))\n}\n\n/**\n * Ritorna la direzione tangente tra due coordinate\n *\n * @param {ATO} ATO\n */\nexport function direction(ATO)\n{\n    let distance = diff(ATO.touches[0], ATO.touches[1])\n    return angle(distance.x, distance.y)\n}\n\n/**\n * Angolo\n */\nexport function angle(a, b) \n{\n    return Math.atan2(b, a) * 180 / Math.PI\n}\n\n/**\n * Ritorna l'angolo di rotazione tra due ATO\n *\n * @param {ATO} ATOstart\n * @param {ATO} ATOend\n */\nexport function rotation(ATOstart, ATOend)\n{\n    return direction(ATOend) - direction(ATOstart)\n}\n","/**\n * La durata minimina per bindare un evento\n * Utile a non prevenire lo scrolling\n * @type {Number}\n */\nexport const ALOETOUCH_MIN_TIME = 33\n\n/**\n * Tempo minimo per bindare l'evento press\n * @type {Number}\n */\nexport const ALOETOUCH_PRESS_MIN_TIME = 600\n\n/**\n * Distanza minima per bindare l'evento swipe[Direction]\n * @type {Number}\n */\nexport const ALOETOUCH_MIN_SWIPE_DISTANCE = 60\n\n/**\n * Distanza massima tra due Tap per bindare l'evento Double Tap\n * @type {Number}\n */\nexport const ALOETOUCH_DBL_TAP_TIME = 300\n"],"sourceRoot":""}