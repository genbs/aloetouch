exports.AloeTouch=function(t){var e={};function i(n){if(e[n])return e[n].exports;var s=e[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(n,s,function(e){return t[e]}.bind(null,s));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){"use strict";i.r(e);function n(t,e,i){var n=[],s=t.touches?t.touches:{e:t};return Object.keys(s).forEach(function(t){(function(t,e,i){return t&&(t.screenX||t.screenY)&&(i?e==t.target:e.contains(t.target))})(s[t],e,i)&&n.push({screenX:s[t].screenX,screenY:s[t].screenY})}),n}function s(t,e){return r(t.touches[0],e.touches[0])}function r(t,e){return{x:e.screenX-t.screenX,y:e.screenY-t.screenY}}function a(t){return t&&t.touches?t.touches.length:0}function o(t){return{x:t.x<=0?"Left":"Right",y:t.y<=0?"Top":"Bottom"}}function c(t){var e=r(t.touches[0],t.touches[1]);return u(e.x,e.y)}function u(t,e){return Math.sqrt(Math.pow(t,2)+Math.pow(e,2))}function h(t){var e,i,n=r(t.touches[0],t.touches[1]);return e=n.x,i=n.y,180*Math.atan2(i,e)/Math.PI}var l=["start","move","end","tap","dbltap","press","swipe","swipeTop","swipeBottom","swipeLeft","swipeRight","pan","pan2","pinch","rotate"],f={emit:function(t,e,i,n){if(l.indexOf(t)>=0&&this[t]&&i)return e.$event=n,this[t](e,i)},start:function(t,e){return e(t)},move:function(t,e){return e(t)},end:function(t,e){var i=t.pan;if(i){t.isSwipe=!1;var n=o(i);Math.abs(i.x)>60&&(t.isSwipe=!0,t.directions?t.directions.x=n.x:t.directions={x:n.x}),Math.abs(i.y)>60&&(t.isSwipe=!0,t.directions?t.directions.y=n.y:t.directions={y:n.y})}return e(t)},tap:function(t,e){if(Date.now()-t.started.time<300)return e()},dbltap:function(t,e){return e()},press:function(t,e){return e()},swipe:function(t,e){var i=t.pan,n=o(i);if(Math.abs(i.x)>60||Math.abs(i.y)>60)return e({coords:i,directions:n},t)},swipeLeft:function(t,e){var i=t.pan;if(i.x<0&&Math.abs(i.x)>60)return e({coords:i},t)},swipeRight:function(t,e){var i=t.pan;if(i.x>0&&Math.abs(i.x)>60)return e({coords:i},t)},swipeTop:function(t,e){var i=t.pan;if(Math.abs(i.y)>60)return e({coords:i},t)},swipeBottom:function(t,e){var i=t.pan;if(Math.abs(t.pan.y)>60)return e({coords:i},t)},pan:function(t,e){return e(t.pan,t)},pan2:function(t,e){return e(t.pan,t)},pinch:function(t,e){return e(t.pinch,t)},rotate:function(t,e){return e(t.rotation,t)}};function p(t){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function d(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var v=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.customState=e,this.old=this.empty(),this.values=this.empty()}var e,i,n;return e=t,(i=[{key:"empty",value:function(){return{pan:{x:0,y:0},pinch:0,rotate:0}}},{key:"set",value:function(t){var e=this;return t.rotate&&(this.values.rotate=t.rotate+this.old.rotate),t.pinch&&(this.values.pinch=t.pinch+this.old.pinch),t.pan&&t.pan.x&&(this.values.pan.x=t.pan.x+this.old.pan.x),t.pan&&t.pan.y&&(this.values.pan.y=t.pan.y+this.old.pan.y),Object.keys(this.customState).forEach(function(t){return e.values[t]=e.customState[t](e.values)}),this.get()}},{key:"get",value:function(){return this.values}},{key:"refresh",value:function(){this.old=this.copy(this.values)}},{key:"copy",value:function(t){var e=this,i={};return Object.keys(t).forEach(function(n){i[n]="object"===p(t[n])&&null!==t[n]?e.copy(t[n]):t[n]}),i}},{key:"add",value:function(t){var e=this;Object.keys(t).forEach(function(i){return e.customState[i]=t[i]}),this.set({})}},{key:"remove",value:function(t){this.values[t]=null,this.values[t]=null,delete this.values[t],delete this.values[t]}},{key:"clear",value:function(){this.values=this.empty(),this.old=this.empty()}}])&&d(e.prototype,i),n&&d(e,n),t}();function m(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var y=function(){function t(e,i,n,s){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.ato=s,this.events=n,this.State=new v(n.state||{}),this.initialData={id:e,el:i,ato:s},this.after={},this.detach("state")}var e,i,n;return e=t,(i=[{key:"emit",value:function(t,e){!1===f.emit(t,this.data,this.events[t],e)&&this.detach(t)}},{key:"emitAfter",value:function(t,e,i){var n=this;this.clearAfter(t),this.after[t]=window.setTimeout(function(){n.emit(t),i&&i()},e)}},{key:"clearAfter",value:function(t){var e=this;void 0===t?Object.keys(this.after).forEach(function(t){return e.clearAfter(t)}):(this.after[t]&&window.clearTimeout(this.after[t]),this.after[t]=null,delete this.after[t])}},{key:"prepare",value:function(t,e,i,n){this.data=Object.assign({},this.initialData,{started:t,ended:e,fingers:i,final:n}),this.setStateData(t,e,i,n),this.data.$state=this.State.get()}},{key:"setStateData",value:function(t,e,i,n){var r;1==i?this.data.pan=s(t,e):2==i&&(this.data.pan=s(t,e),this.data.pinch=(r=t,c(e)-c(r)),this.data.rotate=function(t,e){return h(e)-h(t)}(t,e)),!n&&this.State.set(this.data)}},{key:"attach",value:function(t){var e=this;Object.keys(t).forEach(function(i){return e.events[i]=t[i]})}},{key:"detach",value:function(t){var e=this;(t="Array"===t.constructor.name?t:[t]).forEach(function(t){return e.events[t]&&delete e.events[t]})}}])&&m(e.prototype,i),n&&m(e,n),t}();function b(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var k=function(){function t(e,i,n,s){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.Emitter=new y(e,i,n||{},s),this.started=null,this.ended=null,this.lastTap=null}var e,i,n;return e=t,(i=[{key:"start",value:function(t,e,i){if(!t.cancelable)return this.clear();this.started?this.started.touches=e:this.started={time:Date.now(),touches:e};var n=a(this.started);n&&(this.Emitter.prepare(this.started),this.Emitter.emitAfter("press",300),this.Emitter.emit("start",t),n>1&&(t.preventDefault(),i&&(!0!==i&&1!==i||t.stopPropagation(),!0!==i&&2!==i||t.stopImmediatePropagation())))}},{key:"isStarted",value:function(){return!!this.started}},{key:"end",value:function(t,e){return this.ended={time:Date.now(),touches:e},a(this.started)==a(this.ended)}},{key:"dispatch",value:function(t,e){var i=a(this.ended);this.Emitter.prepare(this.started,this.ended,i,!!t),t?this.dispatchFinalEvents(!!this.ended,e):this.dispatchMovedEvents(i,e)}},{key:"dispatchFinalEvents",value:function(t,e){t?this.dispatchSwipe(e):this.dispatchTap(e),this.Emitter.emit("end",e),this.clear()}},{key:"dispatchMovedEvents",value:function(t,e){this.Emitter.clearAfter("press"),1==t?this.Emitter.emit("pan",e):2==t&&(this.Emitter.emit("pan2",e),this.Emitter.emit("pinch",e),this.Emitter.emit("rotate",e)),this.Emitter.emit("move",e)}},{key:"dispatchTap",value:function(t){var e=this;this.lastTap?this.started.time-this.lastTap<300&&(this.Emitter.clearAfter("tap"),this.Emitter.emit("dbltap",t),this.lastTap=null):(this.lastTap=this.started.time,this.Emitter.emitAfter("tap",300,function(){return e.lastTap=null}))}},{key:"dispatchSwipe",value:function(t){this.Emitter.emit("swipe",t),this.Emitter.emit("swipeLeft",t),this.Emitter.emit("swipeRight",t),this.Emitter.emit("swipeTop",t),this.Emitter.emit("swipeBottom",t)}},{key:"clear",value:function(){this.started=null,this.ended=null,this.Emitter.clearAfter("press"),this.Emitter.State.refresh()}}])&&b(e.prototype,i),n&&b(e,n),t}();function g(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var E={strict:!1,stopPropagation:!1,isPermissible:null,onlyX:!1,onlyY:!1},w=function(){function t(e,i,n,s){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e,this.el="string"==typeof i?document.querySelector(i):i,this.settings=Object.assign({},E,s),this.locked=!0,this.public=this.getPublicMethods(),this.Dispatcher=new k(e,this.el,n,this.public),this.start=this.start.bind(this),this.move=this.move.bind(this),this.finish=this.finish.bind(this),this.unlock(),this.el.style.willChange="transform"}var e,i,r;return e=t,(i=[{key:"start",value:function(t){!this.locked&&this.Dispatcher.start(t,n(t,this.el,this.settings.strict),this.settings.stopPropagation)}},{key:"move",value:function(t){!this.locked&&this.Dispatcher.isStarted()&&this.Dispatcher.end(t,n(t,this.el,this.settings.strict))&&this.isPermissible(t)?(!0!==this.settings.stopPropagation&&1!==this.settings.stopPropagation||t.stopPropagation(),!0!==this.settings.stopPropagation&&2!==this.settings.stopPropagation||t.stopImmediatePropagation(),t.preventDefault(),this.Dispatcher.dispatch(null,t)):this.Dispatcher.clear()}},{key:"isPermissible",value:function(t){var e,i,n,r,a,o,c=this;return this.settings.isPermissible?this.settings.isPermissible(t,s(this.Dispatcher.started,this.Dispatcher.ended),this.Dispatcher.started,this.Dispatcher.ended):(r=Date.now()-c.Dispatcher.started.time,e=c.Dispatcher.started,i=c.Dispatcher.ended,n=s(e,i),a=Math.abs(n.x)>Math.abs(n.y),o=function(t,e){var i=s(t,e);return Math.abs(i.y)>Math.abs(i.x)}(c.Dispatcher.started,c.Dispatcher.ended),t.cancelable&&(!c.settings.onlyX&&!c.settings.onlyY&&r>100||a||c.settings.onlyX&&a||c.settings.onlyY&&o))}},{key:"finish",value:function(t){!this.locked&&this.Dispatcher.isStarted()&&(this.Dispatcher.dispatch(!0,t),this.settings.stopPropagation&&(t.stopPropagation(),t.stopImmediatePropagation()))}},{key:"isLock",value:function(){return this.locked}},{key:"lock",value:function(){this.locked||(this.off("touchstart",this.start,!0),this.off("touchmove",this.move),this.off("touchend touchcancel",this.finish,!0),this.locked=!0)}},{key:"unlock",value:function(){this.locked&&(this.on("touchstart",this.start,!0),this.on("touchmove",this.move),this.on("touchend touchleave touchcancel",this.finish,!0),this.locked=!1)}},{key:"on",value:function(t,e,i){var n=this;t.split(" ").forEach(function(t){return n.el.addEventListener(t,e,!i||{passive:!0})})}},{key:"off",value:function(t,e){var i=this;t.split(" ").forEach(function(t){return i.el.removeEventListener(t,e,!0)})}},{key:"getPublicMethods",value:function(){var t=this;return{el:this.el,$id:this.id,attach:function(e){t.Dispatcher.Emitter.attach(e)},detach:function(e){t.Dispatcher.Emitter.detach(e)},getState:function(){t.Dispatcher.Emitter.State.get()},clearState:function(){t.Dispatcher.Emitter.State.clear()},addState:function(e){t.Dispatcher.Emitter.State.add(e)},removeState:function(e){t.Dispatcher.Emitter.State.remove(e)},lock:function(){t.lock()},unlock:function(){t.unlock()},isLock:function(){return t.isLock()},$ref:this}}}])&&g(e.prototype,i),r&&g(e,r),t}(),S={version:"0.0.1",increment:0,list:{},bind:function(t,e,i){var n=++S.increment,s=new w(n,t,e,i).public;return s.el.setAttribute("aloetouch-data-id",n),S.list[n]=s},unbind:function(t){var e=t.nodeType?t.getAttribute("aloetouch-data-id"):this.getIds(t,!0);return!!e&&(S.list[e].lock(),delete S.list[e].$ref,delete S.list[e],!0)},get:function(t){return S.list.hasOwnProperty(t)?S.list[t]:null},getIds:function(t,e){return t=(t=(t="Array"===t.constructor.name?t:[t]).map(function(t){return"number"==typeof t?S.get(t)?t:null:t.$ref?t.$id:null})).filter(function(t){return!!t}),e?t[0]:t},lock:function(t){t?S.list[t].lock():S.map(function(t){return t.lock()})},lockExcept:function(t){t=this.getIds(t)||[],S.map(function(e,i){return e[-1==t.indexOf(i)?"unlock":"lock"]()})},lockOnly:function(t){t=this.getIds(t)||[],S.map(function(e,i){return e[t.indexOf(i)>=0?"lock":"unlock"]()})},unlock:function(t){t?S.list[t].unlock():S.map(function(t){return t.unlock()})},unlockExcept:function(t){S.lockOnly(t)},unlockOnly:function(t){S.lockExcept(t)},map:function(t){Object.keys(S.list).forEach(function(e){return t(S.list[e],e)})}};e.default=S}]);